# 环境变量配置说明

## 为什么使用环境变量？

✅ **安全性**：密码不会出现在代码中  
✅ **灵活性**：不同环境可以使用不同配置  
✅ **版本控制友好**：.env 文件不会被提交到 Git

---

## 配置方法

### 方法1：使用脚本创建（推荐）

在项目根目录，**双击运行**：`创建环境变量文件.bat`

按提示输入 MySQL 配置信息即可。

### 方法2：手动创建

1. 在 `backend/` 目录下创建文件 `.env`（注意前面有个点）

2. 添加以下内容：

```env
# MySQL 数据库配置
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=你的MySQL密码
MYSQL_DATABASE=thumbs_mall

# Flask 安全配置
SECRET_KEY=your-secret-key-change-in-production
JWT_SECRET_KEY=jwt-secret-key-change-in-production
```

3. 保存文件

---

## 配置项说明

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| MYSQL_HOST | MySQL 服务器地址 | localhost |
| MYSQL_PORT | MySQL 端口 | 3306 |
| MYSQL_USER | MySQL 用户名 | root |
| MYSQL_PASSWORD | MySQL 密码 | *必填* |
| MYSQL_DATABASE | 数据库名称 | thumbs_mall |
| SECRET_KEY | Flask 密钥 | 建议修改 |
| JWT_SECRET_KEY | JWT 密钥 | 建议修改 |

---

## 验证配置

配置完成后，可以测试是否正确：

```bash
cd backend
python -c "from config import Config; print('密码配置:', '✓' if Config.MYSQL_PASSWORD else '×')"
```

或运行：`测试数据库连接.bat`

---

## 注意事项

⚠️ **.env 文件包含敏感信息**
- 不要提交到 Git 仓库
- 不要分享给他人
- 已在 .gitignore 中忽略

⚠️ **部署到生产环境时**
- 修改 SECRET_KEY 和 JWT_SECRET_KEY 为复杂的随机字符串
- 使用强密码
- 考虑使用更安全的配置管理方案

---

## 常见问题

### Q: .env 文件无法创建？
A: Windows 下创建以点开头的文件需要特殊方法，使用 `创建环境变量文件.bat` 脚本即可。

### Q: 配置了 .env 但还是报密码错误？
A: 确保安装了 python-dotenv 包：`pip install python-dotenv`

### Q: 想在代码中看到配置是否生效？
A: 在 config.py 中临时添加：
```python
print(f"[Debug] 读取到的密码: {MYSQL_PASSWORD}")
```

---

## 生产环境建议

对于生产环境，建议使用更专业的配置管理：

- **Docker**: 使用 docker-compose.yml 的 environment
- **K8s**: 使用 ConfigMap 和 Secret
- **云服务**: 使用云平台的密钥管理服务
- **配置中心**: 如 Apollo、Nacos 等



